<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NexMeet Â· Connect & Collaborate</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#FF3D6D',
                        'primary-hover': '#E02B5A',
                        secondary: '#FF90A8',
                        'secondary-hover': '#E0758E',
                        'light-bg': '#FFF0F4',
                        'dark-text': '#1A1A1A',
                        'card-bg': 'rgba(255, 255, 255, 0.95)',
                        'gradient-start': '#FF6F61',
                        'gradient-end': '#FF90A8'
                    },
                    fontFamily: {
                        playfair: ['Playfair Display', 'serif'],
                        poppins: ['Poppins', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <!-- Custom CSS -->
    <style>
        .sidebar {
            transition: transform 0.3s ease-in-out;
        }

        .sidebar.hidden {
            transform: translateX(-100%);
        }

        /* Ensure text visibility */
        .item i, .item h3, .item p {
            color: black !important;
            opacity: 1 !important;
            display: block !important;
        }

        /* Room/Channel card background */
        .item.room, .item.channel {
            background: #FFD1DC !important;
        }

        /* View More card styling */
        .item.view-more {
            background: var(--secondary) !important;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .item.view-more i, .item.view-more p {
            color: white !important;
        }

        /* Dropdown styling */
        .view-more-dropdown {
            display: none;
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            z-index: 50;
        }
    </style>
</head>
<body class="bg-light-bg text-dark-text min-h-screen flex flex-col font-poppins">
    <!-- Navbar -->
    <nav class="bg-card-bg p-4 flex justify-between items-center shadow-lg sticky top-0 z-50">
        <div class="font-playfair text-2xl text-primary">NexMeet</div>
        <div class="relative w-full max-w-xs">
            <i class="fas fa-search absolute top-1/2 left-3 transform -translate-y-1/2 text-secondary"></i>
            <input type="text" class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/30" placeholder="Search friends, rooms, or channels..." aria-label="Search">
        </div>
        <div class="relative flex items-center gap-3 cursor-pointer profile" role="button" aria-haspopup="true" aria-expanded="false" tabindex="0">
            <img src="https://via.placeholder.com/40" alt="User Profile" id="profile-pic" class="w-10 h-10 rounded-full object-cover">
            <span id="user-name" class="text-sm">Guest</span>
            <span class="absolute -top-1 -right-1 bg-primary text-white text-xs px-2 py-1 rounded-full">3</span>
            <div class="dropdown hidden absolute top-12 right-0 bg-card-bg rounded-lg shadow-lg z-50">
                <a href="#" id="view-profile" class="block px-4 py-2 text-sm text-dark-text hover:bg-primary hover:text-white">View Profile</a>
                <a href="#" id="settings" class="block px-4 py-2 text-sm text-dark-text hover:bg-primary hover:text-white">Settings</a>
                <a href="#" id="sign-out" class="block px-4 py-2 text-sm text-dark-text hover:bg-primary hover:text-white">Sign Out</a>
            </div>
        </div>
        <div class="hamburger text-primary text-xl cursor-pointer">
            <i class="fas fa-bars"></i>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="container flex flex-1 mx-4 my-6 gap-6">
        <!-- Sidebar -->
        <aside class="sidebar hidden fixed top-16 bottom-0 w-64 bg-card-bg rounded-xl p-4 shadow-lg z-40">
            <h3 class="text-primary text-lg font-medium mb-2">Social</h3>
            <a href="#" class="flex items-center gap-2 px-3 py-2 text-sm text-dark-text rounded-lg hover:bg-primary hover:text-white" aria-label="Home"><i class="fas fa-home"></i> Home</a>
            <a href="#" class="flex items-center gap-2 px-3 py-2 text-sm text-dark-text rounded-lg hover:bg-primary hover:text-white" aria-label="Find Friends"><i class="fas fa-user-plus"></i> Find Friends</a>
            <a href="chat3.html" class="flex items-center gap-2 px-3 py-2 text-sm text-dark-text rounded-lg hover:bg-primary hover:text-white" aria-label="Chats"><i class="fas fa-comments"></i> Chats</a>
            <h3 class="text-primary text-lg font-medium mt-4 mb-2">Rooms</h3>
            <a href="#" class="flex items-center gap-2 px-3 py-2 text-sm text-dark-text rounded-lg hover:bg-primary hover:text-white" aria-label="Public Rooms"><i class="fas fa-users"></i> Public Rooms</a>
            <a href="#" class="flex items-center gap-2 px-3 py-2 text-sm text-dark-text rounded-lg hover:bg-primary hover:text-white" aria-label="My Rooms"><i class="fas fa-door-open"></i> My Rooms</a>
            <h3 class="text-primary text-lg font-medium mt-4 mb-2">Account</h3>
            <a href="#" class="flex items-center gap-2 px-3 py-2 text-sm text-dark-text rounded-lg hover:bg-primary hover:text-white" aria-label="Profile"><i class="fas fa-user"></i> Profile</a>
            <a href="#" class="flex items-center gap-2 px-3 py-2 text-sm text-dark-text rounded-lg hover:bg-primary hover:text-white" aria-label="Settings"><i class="fas fa-cog"></i> Settings</a>
            <a href="#" id="sidebar-sign-out" class="flex items-center gap-2 px-3 py-2 text-sm text-dark-text rounded-lg hover:bg-primary hover:text-white" aria-label="Sign Out"><i class="fas fa-sign-out-alt"></i> Sign Out</a>
        </aside>

        <!-- Main Content -->
        <main class="main-content flex-1">
            <!-- Top Rooms -->
            <div class="card bg-card-bg p-6 rounded-xl shadow-lg mb-6">
                <h2 class="text-lg font-medium text-dark-text mb-4">Top Rooms</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="item room p-4 rounded-lg text-center">
                        <i class="fas fa-code text-2xl mb-2"></i>
                        <h3 class="text-base font-medium">Code Lovers</h3>
                        <p class="text-sm">Share tips and tricks!</p>
                        <button class="mt-2 px-4 py-1 bg-card-bg text-primary rounded-full hover:bg-primary-hover hover:text-white transition-all duration-200">Join</button>
                    </div>
                    <div class="item room p-4 rounded-lg text-center">
                        <i class="fas fa-music text-2xl mb-2"></i>
                        <h3 class="text-base font-medium">Music Vibes</h3>
                        <p class="text-sm">Discover new tunes!</p>
                        <button class="mt-2 px-4 py-1 bg-card-bg text-primary rounded-full hover:bg-primary-hover hover:text-white transition-all duration-200">Join</button>
                    </div>
                    <div class="item room p-4 rounded-lg text-center">
                        <i class="fas fa-dumbbell text-2xl mb-2"></i>
                        <h3 class="text-base font-medium">Fitness Fans</h3>
                        <p class="text-sm">Workout tips and motivation!</p>
                        <button class="mt-2 px-4 py-1 bg-card-bg text-primary rounded-full hover:bg-primary-hover hover:text-white transition-all duration-200">Join</button>
                    </div>
                    <div class="item room p-4 rounded-lg text-center">
                        <i class="fas fa-camera text-2xl mb-2"></i>
                        <h3 class="text-base font-medium">Photography Club</h3>
                        <p class="text-sm">Capture the moment!</p>
                        <button class="mt-2 px-4 py-1 bg-card-bg text-primary rounded-full hover:bg-primary-hover hover:text-white transition-all duration-200">Join</button>
                    </div>
                    <div class="item room p-4 rounded-lg text-center">
                        <i class="fas fa-utensils text-2xl mb-2"></i>
                        <h3 class="text-base font-medium">Foodie Friends</h3>
                        <p class="text-sm">Share recipes and reviews!</p>
                        <button class="mt-2 px-4 py-1 bg-card-bg text-primary rounded-full hover:bg-primary-hover hover:text-white transition-all duration-200">Join</button>
                    </div>
                    <div class="item room p-4 rounded-lg text-center">
                        <i class="fas fa-gamepad text-2xl mb-2"></i>
                        <h3 class="text-base font-medium">Gamer Hub</h3>
                        <p class="text-sm">Connect with gamers!</p>
                        <button class="mt-2 px-4 py-1 bg-card-bg text-primary rounded-full hover:bg-primary-hover hover:text-white transition-all duration-200">Join</button>
                    </div>
                    <div class="item view-more p-4 rounded-lg text-center relative" data-group="rooms">
                        <i class="fas fa-ellipsis-h text-2xl mb-2"></i>
                        <p class="text-base font-medium">View More</p>
                        <div class="view-more-dropdown hidden bg-card-bg rounded-lg shadow-lg">
                            <a href="#" class="block px-4 py-2 text-sm text-dark-text hover:bg-primary hover:text-white" data-action="view-more">View More</a>
                            <a href="#" class="block px-4 py-2 text-sm text-dark-text hover:bg-primary hover:text-white" data-action="join">Join</a>
                            <a href="#" class="block px-4 py-2 text-sm text-dark-text hover:bg-primary hover:text-white" data-action="subscribe">Subscribe</a>
                            <a href="#" class="block px-4 py-2 text-sm text-dark-text hover:bg-primary hover:text-white" data-action="share">Share</a>
                            <a href="#" class="block px-4 py-2 text-sm text-dark-text hover:bg-primary hover:text-white" data-action="invite">Invite</a>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Top Channels -->
            <div class="card bg-card-bg p-6 rounded-xl shadow-lg mb-6">
                <h2 class="text-lg font-medium text-dark-text mb-4">Top Channels</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="item channel p-4 rounded-lg text-center">
                        <i class="fas fa-heart text-2xl mb-2"></i>
                        <h3 class="text-base font-medium">Romantic Vibes</h3>
                        <p class="text-sm">Connect with like-minded romantics!</p>
                        <button class="mt-2 px-4 py-1 bg-card-bg text-primary rounded-full hover:bg-primary-hover hover:text-white transition-all duration-200">Join</button>
                    </div>
                    <div class="item channel p-4 rounded-lg text-center">
                        <i class="fas fa-briefcase text-2xl mb-2"></i>
                        <h3 class="text-base font-medium">Career Growth</h3>
                        <p class="text-sm">Build your professional network!</p>
                        <button class="mt-2 px-4 py-1 bg-card-bg text-primary rounded-full hover:bg-primary-hover hover:text-white transition-all duration-200">Join</button>
                    </div>
                    <div class="item channel p-4 rounded-lg text-center">
                        <i class="fas fa-paint-brush text-2xl mb-2"></i>
                        <h3 class="text-base font-medium">Art Lovers</h3>
                        <p class="text-sm">Share your creative works!</p>
                        <button class="mt-2 px-4 py-1 bg-card-bg text-primary rounded-full hover:bg-primary-hover hover:text-white transition-all duration-200">Join</button>
                    </div>
                    <div class="item channel p-4 rounded-lg text-center">
                        <i class="fas fa-leaf text-2xl mb-2"></i>
                        <h3 class="text-base font-medium">Eco Warriors</h3>
                        <p class="text-sm">Discuss sustainability!</p>
                        <button class="mt-2 px-4 py-1 bg-card-bg text-primary rounded-full hover:bg-primary-hover hover:text-white transition-all duration-200">Join</button>
                    </div>
                    <div class="item channel p-4 rounded-lg text-center">
                        <i class="fas fa-globe text-2xl mb-2"></i>
                        <h3 class="text-base font-medium">Travel Enthusiasts</h3>
                        <p class="text-sm">Plan your next adventure!</p>
                        <button class="mt-2 px-4 py-1 bg-card-bg text-primary rounded-full hover:bg-primary-hover hover:text-white transition-all duration-200">Join</button>
                    </div>
                    <div class="item channel p-4 rounded-lg text-center">
                        <i class="fas fa-book text-2xl mb-2"></i>
                        <h3 class="text-base font-medium">Book Club</h3>
                        <p class="text-sm">Discuss your favorite reads!</p>
                        <button class="mt-2 px-4 py-1 bg-card-bg text-primary rounded-full hover:bg-primary-hover hover:text-white transition-all duration-200">Join</button>
                    </div>
                    <div class="item view-more p-4 rounded-lg text-center relative" data-group="channels">
                        <i class="fas fa-ellipsis-h text-2xl mb-2"></i>
                        <p class="text-base font-medium">View More</p>
                        <div class="view-more-dropdown hidden bg-card-bg rounded-lg shadow-lg">
                            <a href="#" class="block px-4 py-2 text-sm text-dark-text hover:bg-primary hover:text-white" data-action="view-more">View More</a>
                            <a href="#" class="block px-4 py-2 text-sm text-dark-text hover:bg-primary hover:text-white" data-action="join">Join</a>
                            <a href="#" class="block px-4 py-2 text-sm text-dark-text hover:bg-primary hover:text-white" data-action="subscribe">Subscribe</a>
                            <a href="#" class="block px-4 py-2 text-sm text-dark-text hover:bg-primary hover:text-white" data-action="share">Share</a>
                            <a href="#" class="block px-4 py-2 text-sm text-dark-text hover:bg-primary hover:text-white" data-action="invite">Invite</a>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Top Users -->
            <div class="card bg-card-bg p-6 rounded-xl shadow-lg">
                <h2 class="text-lg font-medium text-dark-text mb-4">Get Inspired</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="item bg-card-bg border border-gray-200 p-4 rounded-lg text-center">
                        <img src="https://via.placeholder.com/40" alt="User" class="w-16 h-16 rounded-full mx-auto mb-2">
                        <h3 class="text-base font-medium">Emma Johnson</h3>
                        <p class="text-sm text-gray-600">Romance Enthusiast</p>
                        <button class="mt-2 px-4 py-1 bg-primary text-white rounded-full hover:bg-primary-hover transition-all duration-200">Follow</button>
                    </div>
                    <div class="item bg-card-bg border border-gray-200 p-4 rounded-lg text-center">
                        <img src="https://via.placeholder.com/40" alt="User" class="w-16 h-16 rounded-full mx-auto mb-2">
                        <h3 class="text-base font-medium">Alex Patel</h3>
                        <p class="text-sm text-gray-600">Tech Innovator</p>
                        <button class="mt-2 px-4 py-1 bg-primary text-white rounded-full hover:bg-primary-hover transition-all duration-200">Follow</button>
                    </div>
                    <div class="item bg-card-bg border border-gray-200 p-4 rounded-lg text-center">
                        <img src="https://via.placeholder.com/40" alt="User" class="w-16 h-16 rounded-full mx-auto mb-2">
                        <h3 class="text-base font-medium">Sarah Kim</h3>
                        <p class="text-sm text-gray-600">Travel Blogger</p>
                        <button class="mt-2 px-4 py-1 bg-primary text-white rounded-full hover:bg-primary-hover transition-all duration-200">Follow</button>
                    </div>
                    <div class="item bg-card-bg border border-gray-200 p-4 rounded-lg text-center">
                        <img src="https://via.placeholder.com/40" alt="User" class="w-16 h-16 rounded-full mx-auto mb-2">
                        <h3 class="text-base font-medium">James Brown</h3>
                        <p class="text-sm text-gray-600">Fitness Coach</p>
                        <button class="mt-2 px-4 py-1 bg-primary text-white rounded-full hover:bg-primary-hover transition-all duration-200">Follow</button>
                    </div>
                    <div class="item bg-card-bg border border-gray-200 p-4 rounded-lg text-center">
                        <img src="https://via.placeholder.com/40" alt="User" class="w-16 h-16 rounded-full mx-auto mb-2">
                        <h3 class="text-base font-medium">Lisa Wong</h3>
                        <p class="text-sm text-gray-600">Food Vlogger</p>
                        <button class="mt-2 px-4 py-1 bg-primary text-white rounded-full hover:bg-primary-hover transition-all duration-200">Follow</button>
                    </div>
                    <div class="item bg-card-bg border border-gray-200 p-4 rounded-lg text-center">
                        <img src="https://via.placeholder.com/40" alt="User" class="w-16 h-16 rounded-full mx-auto mb-2">
                        <h3 class="text-base font-medium">Ryan Lee</h3>
                        <p class="text-sm text-gray-600 Lekin">Gamer Streamer</p>
                        <button class="mt-2 px-4 py-1 bg-primary text-white rounded-full hover:bg-primary-hover transition-all duration-200">Follow</button>
                    </div>
                    <div class="item view-more p-4 rounded-lg text-center relative" data-group="users">
                        <i class="fas fa-ellipsis-h text-2xl mb-2"></i>
                        <p class="text-base font-medium">View More</p>
                        <div class="view-more-dropdown hidden bg-card-bg rounded-lg shadow-lg">
                            <a href="#" class="block px-4 py-2 text-sm text-dark-text hover:bg-primary hover:text-white" data-action="view-more">View More</a>
                            <a href="#" class="block px-4 py-2 text-sm text-dark-text hover:bg-primary hover:text-white" data-action="follow">Follow</a>
                            <a href="#" class="block px-4 py-2 text-sm text-dark-text hover:bg-primary hover:text-white" data-action="subscribe">Subscribe</a>
                            <a href="#" class="block px-4 py-2 text-sm text-dark-text hover:bg-primary hover:text-white" data-action="share">Share</a>
                            <a href="#" class="block px-4 py-2 text-sm text-dark-text hover:bg-primary hover:text-white" data-action="invite">Invite</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="text-center mt-4">
                <button class="px-4 py-2 bg-secondary text-white rounded-full hover:bg-secondary-hover transition-all duration-200">Create Room</button>
            </div>
        </main>
    </div>

    <!-- Footer -->
    <footer class="bg-card-bg p-4 text-center text-gray-600 text-sm mt-auto">
        <p>Â© 2025 NexMeet. All rights reserved. <a href="#" class="text-primary hover:underline">Privacy Policy</a> | <a href="#" class="text-primary hover:underline">Terms & Conditions</a></p>
    </footer>

    <!-- Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-auth-compat.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script>
        // **Security Warning**: Hardcoding Firebase config is insecure. Move to environment variables.
       const firebaseConfig = {
  apiKey: "AIzaSyB1ED_SDykZ3Lda-NsByEKX3pw8bwcmW84",
  authDomain: "nexmeet-89881.firebaseapp.com",
  databaseURL: "https://nexmeet-89881-default-rtdb.firebaseio.com",
  projectId: "nexmeet-89881",
  storageBucket: "nexmeet-89881.firebasestorage.app",
  messagingSenderId: "750063617210",
  appId: "1:750063617210:web:062e758b0905681780ae83",
  measurementId: "G-9E3T1M3DFZ"
};

        try {
            firebase.initializeApp(firebaseConfig);
            console.log('Firebase initialized successfully');
        } catch (error) {
            console.error('Firebase initialization failed:', error);
        }

        document.addEventListener('DOMContentLoaded', () => {
            console.log('ðŸŒ DOM Loaded');
            const profile = document.querySelector('.profile');
            const profileDropdown = document.querySelector('.profile .dropdown');
            const hamburger = document.querySelector('.hamburger');
            const sidebar = document.querySelector('.sidebar');
            const profilePic = document.querySelector('#profile-pic');
            const userName = document.querySelector('#user-name');
            const signOutLinks = document.querySelectorAll('#sign-off, #sidebar-sign-out');
            const joinButtons = document.querySelectorAll('.item:not(.view-more) button');
            const viewMoreCards = document.querySelectorAll('.item.view-more');

            // Log section item counts
            console.log('Rooms:', document.querySelector('.card:nth-child(1) .grid').children.length - 1, 'items + View More');
            console.log('Channels:', document.querySelector('.card:nth-child(2) .grid').children.length - 1, 'items + View More');
            console.log('Users:', document.querySelector('.card:nth-child(3) .grid').children.length - 1, 'items + View More');

            // Firebase Auth
            firebase.auth().onAuthStateChanged((user) => {
                console.log('ðŸ” Auth:', user ? 'Signed in' : 'Guest');
                if (user) {
                    userName.textContent = user.displayName || user.email || 'User';
                    profilePic.src = user.photoURL || 'https://via.placeholder.com/40';
                } else {
                    userName.textContent = 'Guest';
                    profilePic.src = 'https://via.placeholder.com/40';
                }
            });

            // GSAP Animations
            if (window.gsap) {
                console.log('ðŸŽ¥ GSAP loaded');
                gsap.from('.item', {
                    duration: 0.6,
                    scale: 0.95,
                    stagger: 0.1,
                    ease: 'power3.out',
                    delay: 0.2,
                    onComplete: () => console.log('âœ… Card animations done')
                });

                const toggleSidebar = (show) => {
                    gsap.to(sidebar, {
                        x: show ? 0 : '-100%',
                        duration: 0.3,
                        ease: 'power3.inOut',
                        onComplete: () => {
                            sidebar.classList.toggle('hidden', !show);
                            sidebar.classList.toggle('active', show);
                            console.log('ðŸ“œ Sidebar:', show ? 'Visible' : 'Hidden');
                        }
                    });
                };

                const toggleProfileDropdown = (show) => {
                    gsap.to(profileDropdown, {
                        opacity: show ? 1 : 0,
                        y: show ? 0 : -10,
                        duration: 0.3,
                        ease: 'power3.out',
                        onComplete: () => {
                            profileDropdown.style.display = show ? 'block' : 'none';
                            profile.setAttribute('aria-expanded', show);
                            console.log('ðŸ‘¤ Profile dropdown:', show ? 'Visible' : 'Hidden');
                        }
                    });
                };

                const toggleViewMoreDropdown = (dropdown, show) => {
                    gsap.to(dropdown, {
                        opacity: show ? 1 : 0,
                        y: show ? 0 : -10,
                        duration: 0.3,
                        ease: 'power3.out',
                        onComplete: () => {
                            dropdown.style.display = show ? 'block' : 'none';
                            console.log('ðŸ”½ View More dropdown:', show ? 'Visible' : 'Hidden');
                        }
                    });
                };

                // Profile Dropdown
                if (profile && profileDropdown) {
                    profile.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const isExpanded = profile.getAttribute('aria-expanded') === 'true';
                        toggleProfileDropdown(!isExpanded);
                    });

                    document.addEventListener('click', (e) => {
                        if (!profile.contains(e.target)) {
                            toggleProfileDropdown(false);
                        }
                    });
                }

                // Sidebar Toggle
                if (hamburger && sidebar) {
                    hamburger.addEventListener('click', () => {
                        const isHidden = sidebar.classList.contains('hidden');
                        toggleSidebar(isHidden);
                    });

                    document.addEventListener('click', (e) => {
                        if (!sidebar.contains(e.target) && !hamburger.contains(e.target) && sidebar.classList.contains('active')) {
                            toggleSidebar(false);
                        }
                    });
                }

                // View More Dropdowns
                viewMoreCards.forEach(card => {
                    const dropdown = card.querySelector('.view-more-dropdown');
                    card.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const isVisible = dropdown.style.display === 'block';
                        toggleViewMoreDropdown(dropdown, !isVisible);
                    });

                    dropdown.querySelectorAll('a').forEach(link => {
                        link.addEventListener('click', (e) => {
                            e.preventDefault();
                            const action = link.getAttribute('data-action');
                            const group = card.getAttribute('data-group');
                            alert(`${action.charAt(0).toUpperCase() + action.slice(1)} functionality for ${group} to be implemented!`);
                            console.log(`ðŸ”˜ ${action} clicked for ${group}`);
                            toggleViewMoreDropdown(dropdown, false);
                        });
                    });
                });

                document.addEventListener('click', (e) => {
                    viewMoreCards.forEach(card => {
                        const dropdown = card.querySelector('.view-more-dropdown');
                        if (!card.contains(e.target) && dropdown.style.display === 'block') {
                            toggleViewMoreDropdown(dropdown, false);
                        }
                    });
                });
            } else {
                console.warn('âš ï¸ GSAP not loaded');
                if (hamburger && sidebar) {
                    hamburger.addEventListener('click', () => {
                        sidebar.classList.toggle('hidden');
                        sidebar.classList.toggle('active');
                        console.log('ðŸ“œ Sidebar (fallback):', sidebar.classList.contains('active') ? 'Visible' : 'Hidden');
                    });
                }

                if (profile && profileDropdown) {
                    profile.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const isExpanded = profile.getAttribute('aria-expanded') === 'true';
                        profileDropdown.style.display = isExpanded ? 'none' : 'block';
                        profile.setAttribute('aria-expanded', !isExpanded);
                        console.log('ðŸ‘¤ Profile dropdown (fallback):', isExpanded ? 'Hidden' : 'Visible');
                    });

                    document.addEventListener('click', (e) => {
                        if (!profile.contains(e.target)) {
                            profileDropdown.style.display = 'none';
                            profile.setAttribute('aria-expanded', 'false');
                        }
                    });
                }

                viewMoreCards.forEach(card => {
                    const dropdown = card.querySelector('.view-more-dropdown');
                    card.addEventListener('click', (e) => {
                        e.stopPropagation();
                        dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
                    });

                    dropdown.querySelectorAll('a').forEach(link => {
                        link.addEventListener('click', (e) => {
                            e.preventDefault();
                            const action = link.getAttribute('data-action');
                            const group = card.getAttribute('data-group');
                            alert(`${action.charAt(0).toUpperCase() + action.slice(1)} functionality for ${group} to be implemented!`);
                            console.log(`ðŸ”˜ ${action} clicked for ${group}`);
                            dropdown.style.display = 'none';
                        });
                    });
                });

                document.addEventListener('click', (e) => {
                    viewMoreCards.forEach(card => {
                        const dropdown = card.querySelector('.view-more-dropdown');
                        if (!card.contains(e.target) && dropdown.style.display === 'block') {
                            dropdown.style.display = 'none';
                        }
                    });
                });
            }

            // Sign Out
            signOutLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    firebase.auth().signOut().then(() => {
                        window.location.href = 'index.html';
                        console.log('ðŸ”“ Signed out');
                    }).catch((error) => {
                        console.error('ðŸ” Sign out failed:', error);
                    });
                });
            });

            // Join/Follow Buttons
            joinButtons.forEach(button => {
                button.addEventListener('click', () => {
                    alert('Join/Follow functionality to be implemented!');
                    console.log('ðŸ”˜ Join/Follow clicked');
                });
            });
        });
    </script>
</body>
</html>